# ğŸ¨ ê·¸ë¦¼ë§ˆë‹¹ AI ì„œë²„

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”
ë…¸ì¸ ì‚¬ìš©ìë¥¼ ìœ„í•œ AI ê¸°ë°˜ ëŒ€í™”í˜• ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì„œë¹„ìŠ¤ì˜ ë°±ì—”ë“œ ì„œë²„ì…ë‹ˆë‹¤.

## ğŸ›  ìµœê·¼ ì—…ë°ì´íŠ¸

### ì£¼ì œ ì¶”ì²œ ì„œë¹„ìŠ¤ ê°œì„  (2024.01)
1. ë©”íƒ€ë°ì´í„° ì²˜ë¦¬ ë¡œì§ ê°œì„ 
   - Spring ì„œë²„ì™€ì˜ ì—°ë™ ê°•í™”
   - ë©”íƒ€ë°ì´í„° ì¡°íšŒ â†’ ì—†ìœ¼ë©´ ìƒì„± â†’ ì €ì¥ ìˆœì„œë¡œ ì²˜ë¦¬
   - ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ìµœì†Œí™”

2. ì‘ë‹µ êµ¬ì¡° ê°œì„ 
   - ë©”íƒ€ë°ì´í„°(ì´ë¯¸ì§€ URL, ì„¤ëª…) í¬í•¨
   - ìŒì„± ì‘ë‹µ í¬í•¨
   - ì„ íƒ/í™•ì • ìƒíƒœ ì •ë³´ í¬í•¨

3. AI ì‘ë‹µ ìƒì„± ë¡œì§ ê°œì„ 
   - ìƒí™©ë³„ ë§ì¶¤í˜• í”„ë¡¬í”„íŠ¸ ì‚¬ìš©
   - ì‚¬ìš©ì ì¹œí™”ì ì¸ ëŒ€í™”ì²´ ì‘ë‹µ
   - ê·¸ë¦¬ê¸° ê°€ì´ë“œë¼ì¸ í¬í•¨

4. ì½”ë“œ êµ¬ì¡° ê°œì„ 
   - ë©”ì„œë“œ ë¶„ë¦¬ë¡œ ì±…ì„ ëª…í™•í™”
   - ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
   - ë¡œê¹… ì¶”ê°€

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
- NestJS (Node.js í”„ë ˆì„ì›Œí¬)
- TypeScript 5.x
  - Target: ES2018 (ES9) - LTS
  - Module: CommonJS
- MongoDB
- OpenAI API (GPT-3.5-turbo, Whisper, TTS, DALL-E)
- Swagger (API ë¬¸ì„œí™”)
- Spring Boot (ì—°ë™)

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥
1. ëŒ€í™” ê´€ë¦¬ (ConversationService)
   - ìŒì„±-í…ìŠ¤íŠ¸ ë³€í™˜ (STT)
   - ìì—°ì–´ ì²˜ë¦¬ ë° ì‘ë‹µ ìƒì„±
   - í…ìŠ¤íŠ¸-ìŒì„± ë³€í™˜ (TTS)
   - ëŒ€í™” ì´ë ¥ ì €ì¥ ë° ê´€ë¦¬
   - ê°œì¸í™”ëœ ëŒ€í™” (ì‚¬ìš©ì ì´ë¦„ í™œìš©)

2. ì‚¬ìš©ì ë°ì´í„° ê´€ë¦¬
   - ê¸°ë³¸ ì •ë³´ (ì´ë¦„, ì„¸ì…˜ID)
   - ì¶œì„ ë°ì´í„° (ì´ ì¶œì„ì¼ìˆ˜, ì—°ì† ì¶œì„ì¼ìˆ˜)
   - ê´€ì‹¬ì‚¬ ë° ì„ í˜¸ë„ ì¶”ì 
   - ê°œì¸ ìƒíƒœ ì •ë³´ ì €ì¥

3. ëŒ€í™” ë¶„ì„ ë° ì •ë³´ ì¶”ì¶œ
   - ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ìë™ ì¶”ì¶œ
   - ê·¸ë¦¼ ê´€ë ¨ ì„ í˜¸ë„ íŒŒì•…
     - ë‚œì´ë„ ì„ í˜¸ë„
     - ìŠ¤íƒ€ì¼ ì„ í˜¸ë„
     - ì„ í˜¸ ì£¼ì œ/ìƒ‰ìƒ
   - ê°œì¸ ìƒíƒœ ì •ë³´ ìˆ˜ì§‘
     - ê°ì • ìƒíƒœ
     - ì‹ ì²´ ìƒíƒœ
     - ê·¸ë¦¼ ê·¸ë¦¬ê¸° ê²½í—˜

4. ì£¼ì œ ì¶”ì²œ ì„œë¹„ìŠ¤ (TopicsService)
   - ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ê¸°ë°˜ ì£¼ì œ ì¶”ì²œ
   - ë™ì  ì£¼ì œ ê·¸ë£¹ ìƒì„±
   - ìƒì„¸ ê·¸ë¦¬ê¸° ê°€ì´ë“œë¼ì¸ ì œê³µ
   - ì˜ˆì‹œ ì´ë¯¸ì§€ ìƒì„± (DALL-E)
   - ë©”íƒ€ë°ì´í„° ê´€ë¦¬ (Spring ì„œë²„ ì—°ë™)
   - ì£¼ì œ ì„ íƒ/í™•ì • í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

## ğŸ’¾ ë°ì´í„° êµ¬ì¡°
### Conversation ìŠ¤í‚¤ë§ˆ
```typescript
{
  sessionId: string;       // ì„¸ì…˜ ì‹ë³„ì
  name: string;           // ì‚¬ìš©ì ì´ë¦„
  userText: string;       // ì‚¬ìš©ì ì…ë ¥
  aiResponse: string;     // AI ì‘ë‹µ
  isFirstVisit: boolean;  // ì²« ë°©ë¬¸ ì—¬ë¶€
  attendanceTotal?: string;    // ì´ ì¶œì„ì¼
  attendanceStreak?: string;   // ì—°ì† ì¶œì„ì¼
  conversationOrder: number;   // ëŒ€í™” ìˆœì„œ
  interests: string[];         // ê´€ì‹¬ì‚¬ ëª©ë¡
  preferences: {              // ì„ í˜¸ë„ ì •ë³´
    difficulty?: string;      // ì„ í˜¸ ë‚œì´ë„
    style?: string;          // ì„ í˜¸ ìŠ¤íƒ€ì¼
    subjects?: string[];     // ì„ í˜¸ ì£¼ì œ
    colors?: string[];       // ì„ í˜¸ ìƒ‰ìƒ
  };
  personalInfo: {            // ê°œì¸ ìƒíƒœ ì •ë³´
    mood?: string;          // ê°ì • ìƒíƒœ
    physicalCondition?: string;  // ì‹ ì²´ ìƒíƒœ
    experience?: string;    // ê·¸ë¦¼ ê²½í—˜
  };
}
```

### Topic ìŠ¤í‚¤ë§ˆ
```typescript
{
  name: string;           // ì£¼ì œ ì´ë¦„ (ì˜ˆ: ë°”ë‚˜ë‚˜, ì‚¬ê³¼ ë“±)
  category: string;       // ì¹´í…Œê³ ë¦¬ (ì˜ˆ: ê³¼ì¼, ë™ë¬¼, í•™ìš©í’ˆ ë“±)
  description?: string;   // ê·¸ë¦¬ê¸° ì„¤ëª… ë˜ëŠ” íŒ
  imageUrl?: string;      // ì˜ˆì‹œ ì´ë¯¸ì§€ URL
  isActive: boolean;      // í™œì„±í™” ì—¬ë¶€
}
```

## ğŸ’» ê°œë°œ í™˜ê²½ ì„¤ì •
1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
   ```bash
   Node.js >= 18.x
   MongoDB >= 7.x
   ```

2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
   ```bash
   # .env íŒŒì¼ ìƒì„±
   OPENAI_API_KEY=your_api_key
   MONGODB_URI=mongodb://127.0.0.1:27017/grimMadang
   SPRING_API_URL=http://localhost:8080  # Spring ì„œë²„ URL
   ```

3. ì„¤ì¹˜ ë° ì‹¤í–‰
   ```bash
   # íŒ¨í‚¤ì§€ ì„¤ì¹˜
   npm install

   # ê°œë°œ ëª¨ë“œ ì‹¤í–‰
   npm run start:dev

   # í”„ë¡œë•ì…˜ ëª¨ë“œ ì‹¤í–‰
   npm run start:prod
   ```

## ğŸ“ API ë¬¸ì„œ
- Swagger UI: `http://localhost:3000/api-docs`

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸
1. ì›°ì»´ í”Œë¡œìš° (`POST /api/conversation/welcomeFlow`)
   ```typescript
   // ìš”ì²­ ë³¸ë¬¸
   {
     sessionId: string;          // ì„¸ì…˜ ID
     name: string;              // ì‚¬ìš©ì ì´ë¦„
     userRequestWavWelcome: string | 'first';  // ìŒì„± ë°ì´í„° ë˜ëŠ” 'first'
     attendanceTotal: string;    // ì´ ì¶œì„ì¼
     attendanceStreak: string;   // ì—°ì† ì¶œì„ì¼
   }

   // ì‘ë‹µ ë³¸ë¬¸
   {
     statusCode: number;        // HTTP ìƒíƒœ ì½”ë“œ
     message: string;          // ì‘ë‹µ ë©”ì‹œì§€
     data: {
       aiResponseWayWelcome: string;  // ìŒì„± ì‘ë‹µ (base64)
       choice: boolean;              // ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì˜í–¥
     }
     timestamp: string;        // ì‘ë‹µ ì‹œê°„
   }
   ```

2. ì£¼ì œ ì¶”ì²œ (`POST /api/topics/explore`)
   ```typescript
   // ìš”ì²­ ë³¸ë¬¸
   {
     sessionId: string;          // ì„¸ì…˜ ID
     name: string;              // ì‚¬ìš©ì ì´ë¦„
     rejectedCount: number;     // ê±°ì ˆ íšŸìˆ˜
     userRequestExploreWav: string | 'first';  // ìŒì„± ë°ì´í„° ë˜ëŠ” 'first'
     isTimedOut: string;        // ì‹œê°„ ì´ˆê³¼ ì—¬ë¶€
   }

   // ì‘ë‹µ ë³¸ë¬¸
   {
     statusCode: number;        // HTTP ìƒíƒœ ì½”ë“œ
     message: string;          // ì‘ë‹µ ë©”ì‹œì§€
     data: {
       topics: string[] | string;  // ì¶”ì²œ ì£¼ì œ ëª©ë¡ ë˜ëŠ” ì„ íƒëœ ì£¼ì œ
       select: string;            // ì£¼ì œ ì„ íƒ ì™„ë£Œ ì—¬ë¶€
       aiResponseExploreWav: string;  // ìŒì„± ì‘ë‹µ (base64)
       metadata?: {              // ì„ íƒëœ ì£¼ì œì˜ ë©”íƒ€ë°ì´í„°
         topicName: string;     // ì£¼ì œ ì´ë¦„
         imageUrl: string;      // ì˜ˆì‹œ ì´ë¯¸ì§€ URL
         description: string;   // ê·¸ë¦¬ê¸° ê°€ì´ë“œë¼ì¸
       }
     }
     timestamp: string;        // ì‘ë‹µ ì‹œê°„
   }
   ```

## ğŸ”„ ì‘ë‹µ í˜•ì‹
ëª¨ë“  API ì‘ë‹µì€ ë‹¤ìŒ í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤:
```json
{
  "statusCode": 200,
  "message": "Success",
  "data": {
    // ì‹¤ì œ ì‘ë‹µ ë°ì´í„°
  },
  "timestamp": "2025-01-06T11:30:00.000Z"
}
```